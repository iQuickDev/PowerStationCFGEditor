<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/bootstrap.css">
    <link rel="stylesheet" href="style/style.css">
    <title>Vodafone Power Station Editor</title>
</head>

<body class="bg-dark">
    <div id="app" class="container m-auto text-light">
        <h1 class="mt-3 fw-bold text-center text-light">Vodafone Power Station WI-FI Configuration Editor</h1>
        <h4 class="text-center">Works on version: XS_3.9.00.05</h4>
        <br>
        <div class="alert alert-danger">
            <h2 class="fw-bold text-center">General Configuration</h2>
        </div>
        <div id="main" class="row m-auto fs-4">
            <div>
                <input type="checkbox" id="toggle-wifi" value="WI-FI">
                <label for="toggle-wifi" class="text-light">
                    Wi-Fi
                </label>
            </div>
            <div>
                <input type="checkbox" id="toggle-wps" value="WI-FI">
                <label for="toggle-wps" class="text-light">
                    Enable WPS
                </label>
            </div>
            <div>
                <input type="checkbox" id="split-ssid" value="WI-FI">
                <label for="splid-ssid" class="text-light">
                    Split SSID
                </label>
            </div>
        </div>
        <br>
        <div id="setup" class="row">
            <div id="general" class="col-6">
                <div class="alert alert-primary">
                    <h3 class="text-center">Default Wi-Fi</h3>
                </div>
            </div>
            <div id="guest" class="col-6">
                <div class="alert alert-secondary">
                    <h3 class="text-center">Guest Wi-Fi</h3>
                </div>
            </div>
        </div>
        <br>
        <div id="output-container" class="output text-center">
            <p>Copy this text and paste it in the browser console after logging on router administration page</p>
            <textarea id="output" class="form-control bg-secondary" rows="10" readonly></textarea>
            <button id="copy" onclick="copyToClipboard()" class="btn btn-primary w-50 fs-4 fw-bold mt-3">Copy</button>
        </div>
    </div>

    <script>

        for (const input of document.querySelectorAll('input'))
        {
            input.addEventListener('change', function() {
                generateConfig()
            })
        }

        let wifiOnOff_all = false
        let enable_wifi_and_wps = false
        let buttonVFNetwork
        let wifi_network_onoff = false
        let split_ssid = false
        let wifi_network_onoff_5g = false
        let select_frenquency = false
        let select_5g_frenquency
        let wifi_network_onoff_guest = false
        let wifi_ssid = false
        let wifi_broadcast_ssid = false
        let wifi_password = false
        let wifi_protection = false
        let wifi_ssid_5g = false
        let wifi_broadcast_ssid_5g = false
        let wifi_password_5g = false
        let wifi_protection_5g = false
        let wifi_ssid_guest = false
        let wifi_broadcast_ssid_guest = false
        let wifi_frenquency_guest = false
        let wifi_protection_guest = false
        let wifi_password_guest = false

        let configuration = [
            {
                "nameObj": {
                    "name": "wifiGeneralNetworkAllOnOff",
                    "id": "wifiOnOff_all"
                },
                "value": wifiOnOff_all,
            },
            {
                "nameObj": {
                    "name": "wifiGeneralEnableWiFiAndWPS",
                    "id": "enable_wifi_and_wps"
                },
                "value": enable_wifi_and_wps,
            },
            {
                "nameObj": {
                    "name": "wifiGeneralButtonVFNetwork",
                    "id": "buttonVFNetwork"
                },
                "value": buttonVFNetwork,
            },
            {
                "nameObj": {
                    "name": "wifiGeneralSplitSSID",
                    "id": "split_ssid"
                },
                "value": split_ssid,
            },
            {
                "nameObj": {
                    "name": "wifiGeneralNetworkOnOff",
                    "id": "wifi_network_onoff"
                },
                "value": wifi_network_onoff,
            },
            {
                "nameObj": {
                    "name": "wifiGeneralNetworkOnOff_5G",
                    "id": "wifi_network_onoff_5g"
                },
                "value": wifi_network_onoff_5g
            },
            {
                "nameObj": {
                    "name": "wifiGeneralFrenquency",
                    "id": "select_frenquency"
                },
                "value": select_frenquency
            },
            {
                "nameObj": {
                    "name": "wifiGeneralFrenquency_5g",
                    "id": "select_5g_frenquency"
                },
                "value": select_5g_frenquency
            },
            {
                "nameObj": {
                    "name": "wifiGeneralNetworkOnOffGuest",
                    "id": "wifi_network_onoff_guest"
                },
                "value": wifi_network_onoff_guest
            },
            {
                "nameObj": {
                    "name": "wifiGeneralSSID",
                    "id": "wifi_ssid"
                },
                "value": wifi_ssid
            },
            {
                "nameObj": {
                    "name": "wifiGeneralBroadcastSSID",
                    "id": "wifi_broadcast_ssid"
                },
                "value": wifi_broadcast_ssid
            },
            {
                "nameObj": {
                    "name": "wifiGeneralPassword",
                    "id": "wifi_password"
                },
                "value": wifi_password
            },
            {
                "nameObj": {
                    "name": "wifiGeneralProtection",
                    "id": "wifi_protection"
                },
                "value": wifi_protection
            },
            {
                "nameObj": {
                    "name": "wifiGeneralSSID_5G",
                    "id": "wifi_ssid_5g"
                },
                "value": wifi_ssid_5g
            },
            {
                "nameObj": {
                    "name": "wifiGeneralBroadcastSSID_5G",
                    "id": "wifi_broadcast_ssid_5g"
                },
                "value": wifi_broadcast_ssid_5g
            },
            {
                "nameObj": {
                    "name": "wifiGeneralPassword_5G",
                    "id": "wifi_password_5g"
                },
                "value": wifi_password_5g
            },
            {
                "nameObj": {
                    "name": "wifiGeneralProtection_5G",
                    "id": "wifi_protection_5g"
                },
                "value": wifi_protection_5g
            },
            {
                "nameObj": {
                    "name": "wifiGeneralSSIDGuest",
                    "id": "wifi_ssid_guest"
                },
                "value": wifi_ssid_guest
            },
            {
                "nameObj": {
                    "name": "wifiGeneralBroadcastSSIDGuest",
                    "id": "wifi_broadcast_ssid_guest"
                },
                "value": wifi_broadcast_ssid_guest
            },
            {
                "nameObj": {
                    "name": "wifiGeneralFrenquencyGuest",
                    "id": "wifi_Frenquency_guest"
                },
                "value": wifi_frenquency_guest
            },
            {
                "nameObj": {
                    "name": "wifiGeneralProtectionGuest",
                    "id": "wifi_protection_guest"
                },
                "value": wifi_protection_guest
            },
            {
                "nameObj": {
                    "name": "wifiGeneralPasswordGuest",
                    "id": "wifi_password_guest"
                },
                "value": wifi_password_guest
            }
        ]

        function generateConfig()
        {
            document.querySelector('#output').value = `dataBatchSend_sjcl(${JSON.stringify(configuration)}, function(){}, "wifi_general")`
        }

        function copyToClipboard()
        {
            try {
                navigator.clipboard.writeText(document.querySelector('#output').value)
                document.querySelector('#copy').classList.remove('btn-primary')
                document.querySelector('#copy').classList.add('btn-success')
                document.querySelector('#copy').textContent = 'Copied!'
            } catch (e)
            {
                console.error(e)
                document.querySelector('#copy').classList.remove('btn-primary')
                document.querySelector('#copy').classList.add('btn-danger')
                document.querySelector('#copy').textContent = 'Could not copy!'
            }

            setTimeout(() =>
                {
                    document.querySelector('#copy').classList.remove('btn-danger')
                    document.querySelector('#copy').classList.remove('btn-success')
                    document.querySelector('#copy').classList.add('btn-primary')
                    document.querySelector('#copy').textContent = 'Copy'
                }, 2000)
        }
    </script>
</body>

</html>